<script>
  fetch('budcredit.csv')
    .then(response => response.text())
    .then(csvData => {
      const rows = csvData.split('\n');
      const transactions = {};

      rows.forEach(row => {
        const columns = row.split(',');
        const name = columns[0];
        const address = columns[1];
        const phone = columns[2];
        const date = columns[3];
        const cost = parseFloat(columns[4].trim()) || 0;
        const remaining = parseFloat(columns[5].trim()) || 0;

        const key = `${name}-${address}`;
        if (transactions.hasOwnProperty(key)) {
          transactions[key].totalCost += cost;
        } else {
          transactions[key] = {
            name: name,
            address: address,
            totalCost: cost,
            phone: phone,
            date: date,
            remaining: remaining
          };
        }
      });

      for (const key in transactions) {
        if (transactions.hasOwnProperty(key)) {
          const transaction = transactions[key];
          const transactionRow = document.createElement('tr');
          transactionRow.innerHTML = `
            <td>${transaction.name}</td>
            <td>${transaction.address}</td>
            <td>${transaction.phone}</td>
            <td>${transaction.date}</td>
            <td>${transaction.totalCost.toFixed(2)}</td>
            <td>${transaction.remaining.toFixed(2)}</td>
          `;

          document.querySelector('tbody').appendChild(transactionRow);
        }
      }
    })
    .catch(error => {
      console.error('Error fetching CSV file:', error);
    });
</script>
